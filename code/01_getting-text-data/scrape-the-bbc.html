<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Webscrape the BBC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="scrape-the-bbc_files/libs/clipboard/clipboard.min.js"></script>
<script src="scrape-the-bbc_files/libs/quarto-html/quarto.js"></script>
<script src="scrape-the-bbc_files/libs/quarto-html/popper.min.js"></script>
<script src="scrape-the-bbc_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="scrape-the-bbc_files/libs/quarto-html/anchor.min.js"></script>
<link href="scrape-the-bbc_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="scrape-the-bbc_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="scrape-the-bbc_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="scrape-the-bbc_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="scrape-the-bbc_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="scrape-the-bbc_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="scrape-the-bbc_files/libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet">
<script src="scrape-the-bbc_files/libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="scrape-the-bbc_files/libs/wordcloud2-0.0.1/hover.js"></script>
<script src="scrape-the-bbc_files/libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Webscrape the BBC</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="load-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-packages">Load Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scrape-the-page" class="level2">
<h2 class="anchored" data-anchor-id="scrape-the-page">Scrape the Page</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Three steps to scrape a webpage:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Read html from site/page</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">'https://www.bbc.com/news/world-middle-east-64062900'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Get the elements on that page that you want</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>paragraphs <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(page, <span class="st">'p'</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. From html elements convert into text</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">html_text2</span>(paragraphs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="print-that-text-tidily" class="level2">
<h2 class="anchored" data-anchor-id="print-that-text-tidily">Print that text (tidily)</h2>
<p>This text should overflow across the PDF margins. Not pretty.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "A hundred days after they began, the longest running anti-government protests in Iran since the 1979 Islamic revolution have shaken the regime, but at a heavy cost to the people."                                                                                                                                                                                        
 [2] "More than 500 protesters, including 69 children, have been killed, according to the Human Rights Activists' News Agency (HRANA). Two protesters have been executed and at least 26 others face the same fate, after what Amnesty International calls \"sham trials\"."                                                                                                     
 [3] "Although nationwide demonstrations have swept Iran before - once in 2017 lasting until early 2018, and another in November 2019 - the current protests are unique, as they involve people from across society and women are taking a lead role under the slogan \"Woman, Life, Freedom\"."                                                                                 
 [4] "Some Iranian celebrities have taken irrevocable steps to support protests, leading to their arrest or exile."                                                                                                                                                                                                                                                              
 [5] "Taraneh Alidoosti, a well-known Iranian actress, is being held in the notorious Evin prison after she condemned the execution of a young protester. Previously, she published a photo of herself without a mandatory headscarf, holding a sign with the protesters' slogan."                                                                                               
 [6] "\"I have worked with Taraneh on four films and now she is in prison for her rightful support of her fellow countrymen and her opposition to the unjust sentences being issued,\" Asghar Farhadi, who directed Alidoosti in his Oscar-winning film The Salesman, wrote on Instagram."                                                                                       
 [7] "\"If showing such support is a crime, then tens of millions of people of this land are criminals,\" Mr Farhadi added."                                                                                                                                                                                                                                                     
 [8] "Another prominent Iranian actress who has left the country, Pegah Ahangarani, told BBC Persian: \"Both sides have been radicalised, the regime in its crackdown and people in film industry in their response."                                                                                                                                                            
 [9] "\"Iran cannot go back to pre-Mahsa Amini era,\" referring to the Kurdish Iranian woman whose death in the custody of Iran's morality police on 16 September sparked the protests."                                                                                                                                                                                         
[10] "Hamid Farrokhnezhad, another well-known Iranian actor, moved to the US earlier this month and immediately called Iranian Supreme Leader Ali Khamenei a \"dictator\", comparing him to Franco, Stalin and Mussolini."                                                                                                                                                       
[11] "Ali Karimi, one of Iran's most celebrated former footballers, who was living in Dubai, also supported the protests. He said Iranian intelligence agents threatened to kill him, eventually leading him to move to the US."                                                                                                                                                 
[12] "Karimi is now one of the most outspoken critics of the Iranian regime on his Instagram account, with more than 14 million followers."                                                                                                                                                                                                                                      
[13] "Another Iranian football icon, Ali Daei, had his jewellery shop and restaurant shut down by the Iranian judiciary after coming out in support of a nationwide strike."                                                                                                                                                                                                     
[14] "What also marks the current protests out from previous ones is the emerging use by demonstrators of petrol bombs."                                                                                                                                                                                                                                                         
[15] "These have been used against bases of the Basij militia and Hawza, or religious schools for Shia Muslim clerics."                                                                                                                                                                                                                                                          
[16] "Iran's Generation Z has been at the forefront of these protests, defying strict religious rule and setting new trends such as burning headscarves."                                                                                                                                                                                                                        
[17] "Another new trend among young protesters is so-called \"turban tossing\" - sneaking up behind Shia Muslim clerics, knocking their turban off and running away."                                                                                                                                                                                                            
[18] "Allow Twitter content?"                                                                                                                                                                                                                                                                                                                                                    
[19] "This article contains content provided by Twitter. We ask for your permission before anything is loaded, as they may be using cookies and other technologies. You may want to read Twitter’s cookie policy, external and privacy policy, external before accepting. To view this content choose ‘accept and continue’."                                                    
[20] "A 16-year-old boy, Arshia Emamgholizadeh, was arrested in the north-western city of Tabriz last month, accused of \"turban tossing\"."                                                                                                                                                                                                                                     
[21] "He was held for 10 days before being released. Two days later, he committed suicide, something his family blames on his treatment in prison. During his detention, Arshia had been beaten with batons and given unknown pills, a source close to the family told BBC Persian."                                                                                             
[22] "Iranian authorities have not only cracked down on protesters, but have also used the bodies of those who have died in custody or been killed as bargaining chips to silence the families of victims."                                                                                                                                                                      
[23] "Fearing such pressure, the brother of a killed protester stole his body from a morgue, driving around town for hours, a source told BBC Persian."                                                                                                                                                                                                                          
[24] "Mehran Samak, 27, was shot in the head in the northern city of Bandar Anzali for honking his car's horn in celebration of Iran's elimination from the World Cup on 29 November."                                                                                                                                                                                           
[25] "Another family say they found shocking signs of torture on the body of their 23-year-old son, Hamed Salahshoor, who died in custody when they exhumed his body after he was forcibly buried 18 miles (30km) away from their home town."                                                                                                                                    
[26] "So far, two men have been executed after being convicted of vaguely defined national security charges linked to the protests, in what human rights groups have condemned as gross miscarriages of justice."                                                                                                                                                                
[27] "Many of those on death row have said they were tortured."                                                                                                                                                                                                                                                                                                                  
[28] "The Kurdistan Human Rights Network, a non-governmental organisation, said a Kurdish-Iranian rapper, Saman Yasin, who was sentenced to death, attempted to kill himself on Tuesday. The rights group has previously said Yasin was tortured while in detention. Iran's Supreme Court upheld an appeal against his death sentence on Saturday and ordered him to be retried."
[29] "In an audio file obtained by BBC Persian, a 26-year-old amateur bodybuilder, Sahand Noormohammadzadeh, alleges that he was subjected to several mock executions in prison."                                                                                                                                                                                                
[30] "Mr Noormohammadzadeh was sentenced to death in November after he was found guilty of \"enmity against God\" (defined under Iranian law as \"creating public insecurity\" with a weapon). He was accused of blocking traffic on a highway by tearing down railings during a protest in Tehran on 23 September, which he denied."                                            
[31] "BBC Persian has also obtained X-ray images that show three ribs of an imprisoned radiologist were broken, piercing his lung. Dr Hamid Ghare-Hasanlou was found guilty of \"corruption on Earth\", a crime which carries death penalty."                                                                                                                                    
[32] "An informed source told Amnesty International that Dr Ghare-Hasanlou was subjected to torture and ill-treatment in order to extract a forced \"confession\"."                                                                                                                                                                                                              
[33] "This video can not be played"                                                                                                                                                                                                                                                                                                                                              
[34] "Watch: The secret diaries of women protesting in Iran"                                                                                                                                                                                                                                                                                                                     
[35] "Iran protester's family find torture signs on body"                                                                                                                                                                                                                                                                                                                        
[36] "Iran executes 23-year-old protester in public"                                                                                                                                                                                                                                                                                                                             
[37] "Disney ends $867m Florida plan amid DeSantis feud"                                                                                                                                                                                                                                                                                                                         
[38] "Italy floods leave 13 dead and thousands displaced"                                                                                                                                                                                                                                                                                                                        
[39] "Man saved after being spotted hanging out of skylight. VideoMan saved after being spotted hanging out of skylight"                                                                                                                                                                                                                                                         
[40] "Taiwan looms large as Japan prepares to host G7"                                                                                                                                                                                                                                                                                                                           
[41] "Serbians hand in guns after two mass shootings"                                                                                                                                                                                                                                                                                                                            
[42] "The girl whose parents were deported while she was at school"                                                                                                                                                                                                                                                                                                              
[43] "How a Canadian walrus ended up in Abu Dhabi"                                                                                                                                                                                                                                                                                                                               
[44] "'We thought it'd be a crisis we could live through'"                                                                                                                                                                                                                                                                                                                       
[45] "Pakistan is on the edge. Should India be worried?"                                                                                                                                                                                                                                                                                                                         
[46] "'We are selling a product that we hope gets discontinued'"                                                                                                                                                                                                                                                                                                                 
[47] "The long-lasting legacy of Apollo"                                                                                                                                                                                                                                                                                                                                         
[48] "Once banned, boxing now thrives in this former warzone"                                                                                                                                                                                                                                                                                                                    
[49] "Three job categories safe from AI"                                                                                                                                                                                                                                                                                                                                         
[50] "The films 'too bad for the cinema'"                                                                                                                                                                                                                                                                                                                                        
[51] "Why did the US plan to nuke the Moon?"                                                                                                                                                                                                                                                                                                                                     
[52] "© 2023 BBC. The BBC is not responsible for the content of external sites. Read about our approach to external linking."                                                                                                                                                                                                                                                    </code></pre>
</div>
</div>
<p>We can solve this with the <code>str_wrap()</code> function from <code>tidyverse</code> , which inserts carriage returns (‘\n’) to convert the text into paragraphs, and the <code>cat()</code> function, which prints the text.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>text <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_wrap</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A hundred days after they began, the longest running anti-government protests
in Iran since the 1979 Islamic revolution have shaken the regime, but at a heavy
cost to the people. More than 500 protesters, including 69 children, have been killed, according
to the Human Rights Activists' News Agency (HRANA). Two protesters have
been executed and at least 26 others face the same fate, after what Amnesty
International calls "sham trials". Although nationwide demonstrations have swept Iran before - once in 2017 lasting
until early 2018, and another in November 2019 - the current protests are
unique, as they involve people from across society and women are taking a lead
role under the slogan "Woman, Life, Freedom". Some Iranian celebrities have taken irrevocable steps to support protests,
leading to their arrest or exile. Taraneh Alidoosti, a well-known Iranian actress, is being held in the notorious
Evin prison after she condemned the execution of a young protester. Previously,
she published a photo of herself without a mandatory headscarf, holding a sign
with the protesters' slogan. "I have worked with Taraneh on four films and now she is in prison for her
rightful support of her fellow countrymen and her opposition to the unjust
sentences being issued," Asghar Farhadi, who directed Alidoosti in his
Oscar-winning film The Salesman, wrote on Instagram. "If showing such support is a crime, then tens of millions of people of this
land are criminals," Mr Farhadi added. Another prominent Iranian actress who has left the country, Pegah Ahangarani,
told BBC Persian: "Both sides have been radicalised, the regime in its crackdown
and people in film industry in their response. "Iran cannot go back to pre-Mahsa Amini era," referring to the Kurdish Iranian
woman whose death in the custody of Iran's morality police on 16 September
sparked the protests. Hamid Farrokhnezhad, another well-known Iranian actor, moved to the US earlier
this month and immediately called Iranian Supreme Leader Ali Khamenei a
"dictator", comparing him to Franco, Stalin and Mussolini. Ali Karimi, one of Iran's most celebrated former footballers, who was living
in Dubai, also supported the protests. He said Iranian intelligence agents
threatened to kill him, eventually leading him to move to the US. Karimi is now one of the most outspoken critics of the Iranian regime on his
Instagram account, with more than 14 million followers. Another Iranian football icon, Ali Daei, had his jewellery shop and restaurant
shut down by the Iranian judiciary after coming out in support of a nationwide
strike. What also marks the current protests out from previous ones is the emerging use
by demonstrators of petrol bombs. These have been used against bases of the Basij militia and Hawza, or religious
schools for Shia Muslim clerics. Iran's Generation Z has been at the forefront of these protests, defying strict
religious rule and setting new trends such as burning headscarves. Another new trend among young protesters is so-called "turban tossing" -
sneaking up behind Shia Muslim clerics, knocking their turban off and running
away. Allow Twitter content? This article contains content provided by Twitter. We ask for your permission
before anything is loaded, as they may be using cookies and other technologies.
You may want to read Twitter’s cookie policy, external and privacy policy,
external before accepting. To view this content choose ‘accept and continue’. A 16-year-old boy, Arshia Emamgholizadeh, was arrested in the north-western city
of Tabriz last month, accused of "turban tossing". He was held for 10 days before being released. Two days later, he committed
suicide, something his family blames on his treatment in prison. During his
detention, Arshia had been beaten with batons and given unknown pills, a source
close to the family told BBC Persian. Iranian authorities have not only cracked down on protesters, but have also used
the bodies of those who have died in custody or been killed as bargaining chips
to silence the families of victims. Fearing such pressure, the brother of a killed protester stole his body from a
morgue, driving around town for hours, a source told BBC Persian. Mehran Samak, 27, was shot in the head in the northern city of Bandar Anzali for
honking his car's horn in celebration of Iran's elimination from the World Cup
on 29 November. Another family say they found shocking signs of torture on the body of their
23-year-old son, Hamed Salahshoor, who died in custody when they exhumed his
body after he was forcibly buried 18 miles (30km) away from their home town. So far, two men have been executed after being convicted of vaguely defined
national security charges linked to the protests, in what human rights groups
have condemned as gross miscarriages of justice. Many of those on death row have said they were tortured. The Kurdistan Human Rights Network, a non-governmental organisation, said a
Kurdish-Iranian rapper, Saman Yasin, who was sentenced to death, attempted to
kill himself on Tuesday. The rights group has previously said Yasin was tortured
while in detention. Iran's Supreme Court upheld an appeal against his death
sentence on Saturday and ordered him to be retried. In an audio file obtained by BBC Persian, a 26-year-old amateur bodybuilder,
Sahand Noormohammadzadeh, alleges that he was subjected to several mock
executions in prison. Mr Noormohammadzadeh was sentenced to death in November after he was found
guilty of "enmity against God" (defined under Iranian law as "creating public
insecurity" with a weapon). He was accused of blocking traffic on a highway
by tearing down railings during a protest in Tehran on 23 September, which he
denied. BBC Persian has also obtained X-ray images that show three ribs of an imprisoned
radiologist were broken, piercing his lung. Dr Hamid Ghare-Hasanlou was found
guilty of "corruption on Earth", a crime which carries death penalty. An informed source told Amnesty International that Dr Ghare-Hasanlou
was subjected to torture and ill-treatment in order to extract a forced
"confession". This video can not be played Watch: The secret diaries of women protesting in Iran Iran protester's family find torture signs on body Iran executes 23-year-old protester in public Disney ends $867m Florida plan amid DeSantis feud Italy floods leave 13 dead and thousands displaced Man saved after being spotted hanging out of skylight. VideoMan saved after
being spotted hanging out of skylight Taiwan looms large as Japan prepares to host G7 Serbians hand in guns after two mass shootings The girl whose parents were deported while she was at school How a Canadian walrus ended up in Abu Dhabi 'We thought it'd be a crisis we could live through' Pakistan is on the edge. Should India be worried? 'We are selling a product that we hope gets discontinued' The long-lasting legacy of Apollo Once banned, boxing now thrives in this former warzone Three job categories safe from AI The films 'too bad for the cinema' Why did the US plan to nuke the Moon? © 2023 BBC. The BBC is not responsible for the content of external sites. Read
about our approach to external linking.</code></pre>
</div>
</div>
</section>
<section id="once-we-have-the-text-lets-tidy-it-and-count-up-the-words" class="level2">
<h2 class="anchored" data-anchor-id="once-we-have-the-text-lets-tidy-it-and-count-up-the-words">Once we have the text, let’s tidy it and count up the words</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first, let's paste all the paragraphs together</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">paste</span>(text, <span class="at">collapse =</span> <span class="st">' '</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># next, let's *tokenize* the text, splitting it up into unigrams (words)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># second, put the text into a dataframe</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">tibble</span>(text)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># then, use the unnest_tokens() function from tidytext to tokenize</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># this function takes three inputs</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 1: the dataframe with the text you want to tokenize</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 2: the name of the column with the text data</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3: the name you want to call the tokenized text column</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">unnest_tokens</span>(d, <span class="at">input =</span> <span class="st">'text'</span>, <span class="at">output =</span> <span class="st">'word'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="some-preliminary-text-analysis" class="level2">
<h2 class="anchored" data-anchor-id="some-preliminary-text-analysis">Some preliminary text analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># frequency distribution of all words</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 603 × 2
   word        n
   &lt;chr&gt;   &lt;int&gt;
 1 the        50
 2 of         35
 3 in         31
 4 a          27
 5 to         27
 6 and        19
 7 on         16
 8 have       14
 9 was        14
10 iranian    13
# … with 593 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># frequency distribution of words, removing stop words like "the" and "of"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">language =</span> <span class="st">'en'</span>, <span class="at">source =</span> <span class="st">'smart'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 468 × 2
   word           n
   &lt;chr&gt;      &lt;int&gt;
 1 iranian       13
 2 protests       8
 3 bbc            7
 4 death          6
 5 iran           6
 6 iran's         5
 7 persian        5
 8 protesters     5
 9 body           4
10 content        4
# … with 458 more rows</code></pre>
</div>
</div>
</section>
<section id="visualizing-frequency-distributions" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-frequency-distributions">Visualizing Frequency Distributions</h2>
<p>We can visualize that frequency distribution in a number of ways.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar chart of the 30 most common words</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">language =</span> <span class="st">'en'</span>, <span class="at">source =</span> <span class="st">'smart'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># just keep the first 30 rows (30 most common words)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">30</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reorder the word variable as a factor, in order of word frequency</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">fct_reorder</span>(word, n)) <span class="sc">|&gt;</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>n, <span class="at">y=</span>word)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="scrape-the-bbc_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># word clouds are also cool</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud2)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">language =</span> <span class="st">'en'</span>, <span class="at">source =</span> <span class="st">'smart'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wordcloud2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-7f94355a882e842baacb" style="width:100%;height:464px;" class="wordcloud2 html-widget"></div>
<script type="application/json" data-for="htmlwidget-7f94355a882e842baacb">{"x":{"word":["iranian","protests","bbc","death","iran","iran's","persian","protesters","body","content","external","family","people","prison","rights","support","told","year","23","ali","custody","days","found","human","killed","november","protester","regime","source","torture","turban","16","26","accused","actress","alidoosti","amnesty","arshia","called","city","clerics","condemned","crime","current","defined","detention","died","dr","executed","farhadi","film","films","ghare","guilty","hamid","hanging","hasanlou","held","instagram","international","karimi","kill","kurdish","lasting","leading","month","mr","muslim","nationwide","noormohammadzadeh","obtained","plan","policy","previously","public","read","religious","running","saved","sentenced","september","shia","signs","skylight","slogan","spotted","subjected","supreme","taraneh","tortured","tossing","town","treatment","twitter","woman","women","yasin","young","10","13","14","18","1979","2017","2018","2019","2023","27","29","30km","500","69","867m","abu","accept","accepting","account","activists","actor","added","agency","agents","ahangarani","ai","alleges","amateur","amid","amini","anti","anzali","apollo","appeal","approach","arrest","arrested","article","asghar","attempted","audio","authorities","back","bad","bandar","banned","bargaining","bases","basij","batons","beaten","began","blames","blocking","bodies","bodybuilder","bombs","boxing","boy","broken","brother","buried","burning","calls","canadian","car's","carries","categories","celebrated","celebration","celebrities","charges","children","chips","choose","cinema","close","coming","committed","comparing","confession","continue","convicted","cookie","cookies","corruption","cost","country","countrymen","court","crackdown","cracked","creating","criminals","crisis","critics","cup","daei","dead","defying","demonstrations","demonstrators","denied","deported","desantis","dhabi","diaries","dictator","directed","discontinued","disney","displaced","driving","dubai","earlier","early","earth","edge","elimination","emamgholizadeh","emerging","ended","ends","enmity","era","eventually","evin","executes","execution","executions","exhumed","exile","extract","face","families","farrokhnezhad","fate","fearing","fellow","feud","file","find","floods","florida","followers","football","footballers","forced","forcibly","forefront","franco","freedom","g7","generation","girl","god","government","governmental","gross","group","groups","guns","hamed","hand","hawza","head","headscarf","headscarves","heavy","highway","holding","home","honking","hope","horn","host","hours","hrana","hundred","icon","ill","images","immediately","imprisoned","including","india","industry","informed","insecurity","intelligence","involve","irrevocable","islamic","issued","italy","japan","jewellery","job","judiciary","justice","khamenei","knocking","kurdistan","land","large","law","lead","leader","leave","left","legacy","life","linked","linking","live","living","loaded","long","longest","looms","lung","mahsa","man","mandatory","marks","mass","mehran","men","miles","militia","million","millions","miscarriages","mock","moon","morality","morgue","move","moved","mussolini","national","network","news","north","northern","notorious","nuke","opposition","order","ordered","organisation","oscar","outspoken","pakistan","parents","pegah","penalty","permission","petrol","photo","piercing","pills","played","police","pre","prepares","pressure","previous","privacy","product","prominent","protest","protester's","protesting","provided","published","radicalised","radiologist","railings","rapper","ray","referring","released","response","responsible","restaurant","retried","revolution","ribs","rightful","role","row","rule","safe","sahand","salahshoor","salesman","samak","saman","saturday","school","schools","secret","security","selling","sentence","sentences","serbians","setting","shaken","sham","shocking","shootings","shop","shot","show","showing","shut","sides","sign","silence","sites","sneaking","society","son","sparked","stalin","steps","stole","strict","strike","suicide","supported","swept","tabriz","taiwan","taking","tearing","technologies","tehran","tens","thought","thousands","threatened","thrives","traffic","trend","trends","trials","tuesday","twitter’s","unique","unjust","unknown","upheld","vaguely","victims","video","videoman","view","walrus","warzone","watch","weapon","western","winning","worked","world","worried","wrote"],"freq":[13,8,7,6,6,5,5,5,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":13.8461538461538,"backgroundColor":"white","gridSize":0,"minRotation":-0.785398163397448,"maxRotation":0.785398163397448,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
</section>
<section id="sentiment-analysis" class="level2">
<h2 class="anchored" data-anchor-id="sentiment-analysis">Sentiment Analysis</h2>
<p>If I want to know if this article is happy or sad, one approach is to count up the number of happy words vs the number of sad words. (Positive vs.&nbsp;negative sentiment).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take our tokenized dataset and merge it with the sentiment lexicon</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only keep words from the BBC article if they appear in the sentiment lexicon</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="at">lexicon =</span> <span class="st">'bing'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 95 × 2
   word     sentiment
   &lt;chr&gt;    &lt;chr&gt;    
 1 protests negative 
 2 killed   negative 
 3 sham     negative 
 4 protests negative 
 5 lead     positive 
 6 freedom  positive 
 7 support  positive 
 8 protests negative 
 9 leading  positive 
10 exile    negative 
# … with 85 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take our tokenized dataset and merge it with the sentiment lexicon</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only keep words from the BBC article if they appear in the sentiment lexicon</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="at">lexicon =</span> <span class="st">'bing'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># count up positive and negative sentiment words</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  sentiment     n
  &lt;chr&gt;     &lt;int&gt;
1 negative     71
2 positive     24</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>